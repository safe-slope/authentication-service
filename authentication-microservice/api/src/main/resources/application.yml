spring:
  application:
    name: auth-service

  profiles:
    active: ${SPRING_PROFILES_ACTIVE:default}

  # ===============================
  # Database (PostgreSQL)
  # ===============================
  datasource:
    url: ${DB_URL:jdbc:postgresql://localhost:5432/authdb}
    username: ${DB_USERNAME:auth_user}
    password: ${DB_PASSWORD:auth_password}
    driver-class-name: org.postgresql.Driver

  # ===============================
  # JPA / Hibernate
  # ===============================
  jpa:
    database-platform: org.hibernate.dialect.PostgreSQLDialect
    hibernate:
      ddl-auto: ${JPA_DDL_AUTO:update}
    show-sql: false
    open-in-view: false
    properties:
      hibernate:
        format_sql: true
        jdbc:
          time_zone: UTC

  # ===============================
  # Flyway (optional but recommended)
  # ===============================
  flyway:
    enabled: ${FLYWAY_ENABLED:true}
    baseline-on-migrate: true

  # ===============================
  # Security / JWT
  # ===============================
  security:
    jwt:
      private-key: ${JWT_PRIVATE_KEY}

# ===============================
# Server
# ===============================
server:
  port: ${SERVER_PORT:8080}
  shutdown: graceful
  error:
    include-message: never
    include-stacktrace: never

# ===============================
# Logging
# ===============================
logging:
  level:
    root: INFO
    org.springframework.security: INFO
    org.springframework.web: INFO
    org.hibernate.SQL: WARN
    org.hibernate.type.descriptor.sql: WARN
    com.yourcompany.auth: DEBUG

  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"

# ===============================
# Actuator / Observability
# ===============================
management:
  endpoints:
    web:
      exposure:
        include: health,info
  endpoint:
    health:
      probes:
        enabled: true
  health:
    livenessState:
      enabled: true
    readinessState:
      enabled: true

# ===============================
# Jackson (API consistency)
# ===============================
spring.jackson:
  serialization:
    write-dates-as-timestamps: false
  time-zone: UTC
